<h2>Create</h2>

<form [formGroup]="newsForm" (ngSubmit)="onSubmit()">
  <h4>News</h4>
  <div class="form-group">
    <label>User</label>
    <select class="form-control" formControlName="userId">
      <option value="">-- Select User --</option>
      @for (user of users; track $index) {
      <option [value]="user.userId">{{ user.username }}</option>
      }
    </select>
    @if (newsForm.get('userId')?.invalid && newsForm.get('userId')?.touched) {
    <div class="text-danger">User is required.</div>
    }
  </div>

  <div class="form-group">
    <label>Title</label>
    <input type="text" formControlName="title" class="form-control" />
    @if (newsForm.get('title')?.invalid && newsForm.get('title')?.touched) {
    <div class="text-danger">Title is required.</div>
    }
  </div>

  <div class="form-group">
    <label>Short Description</label>
    <textarea
      formControlName="shortDescription"
      class="form-control"
    ></textarea>
  </div>

  <div class="form-group">
    <label>Image</label>
    <input
      type="file"
      class="form-control"
      (change)="onFileSelected($event)"
      accept="image/*"
    />
    @if (!selectedFile && newsForm.touched) {
    <small class="text-danger">Image is required</small>
    }
  </div>

  <div class="form-group">
    <label>Content</label>
    <textarea formControlName="content" class="form-control"></textarea>
  </div>

  <div class="form-group">
    <label>Created Date</label>
    <input type="date" formControlName="createdDate" class="form-control" />
  </div>

  <div class="form-group">
    <label>Status</label>
    <select formControlName="status" class="form-control">
      <option value="1">Active</option>
      <option value="0">Inactive</option>
    </select>
  </div>

  <button type="submit" class="btn btn-primary" [disabled]="newsForm.invalid">
    Create
  </button>
  <a routerLink="/news-management" class="btn btn-secondary ml-2"
    >Back to List</a
  >
</form>
